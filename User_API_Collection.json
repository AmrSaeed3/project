{
  "info": {
    "name": "User API Documentation",
    "description": "Complete documentation for the User API endpoints with examples",
    "schema": "https://schema.getpostman.com/json/collection/v2.1.0/collection.json"
  },
  "item": [
    {
      "name": "Get All Users",
      "request": {
        "method": "GET",
        "url": {
          "raw": "{{meng}}/api/v1/users",
          "host": ["{{meng}}"],
          "path": ["api", "v1", "users"]
        },
        "description": "Retrieves a list of all active users in the system."
      },
      "response": [
        {
          "name": "Success Response",
          "originalRequest": {
            "method": "GET",
            "url": {
              "raw": "{{meng}}/api/v1/users",
              "host": ["{{meng}}"],
              "path": ["api", "v1", "users"]
            }
          },
          "status": "OK",
          "code": 200,
          "_postman_previewlanguage": "json",
          "header": [
            {
              "key": "Content-Type",
              "value": "application/json"
            }
          ],
          "body": {
            "mode": "raw",
            "raw": "{\n  \"data\": [\n    {\n      \"_id\": \"60d21b4667d0d8992e610c85\",\n      \"name\": \"John Doe\",\n      \"email\": \"john@example.com\",\n      \"role\": \"user\",\n      \"phone\": \"01234567890\",\n      \"image\": \"https://res.cloudinary.com/your-cloud-name/image/upload/v1/users/profiles/user1.png\",\n      \"active\": true,\n      \"createdAt\": \"2023-06-18T14:20:22.000Z\",\n      \"updatedAt\": \"2023-06-18T14:20:22.000Z\"\n    },\n    {\n      \"_id\": \"60d21b4667d0d8992e610c86\",\n      \"name\": \"Jane Smith\",\n      \"email\": \"jane@example.com\",\n      \"role\": \"admin\",\n      \"phone\": \"01234567891\",\n      \"image\": \"https://res.cloudinary.com/your-cloud-name/image/upload/v1/users/profiles/user2.png\",\n      \"active\": true,\n      \"createdAt\": \"2023-06-18T14:25:42.000Z\",\n      \"updatedAt\": \"2023-06-18T14:25:42.000Z\"\n    }\n  ]\n}"
          }
        }
      ]
    },
    {
      "name": "Get User By ID",
      "request": {
        "method": "GET",
        "url": {
          "raw": "{{meng}}/api/v1/users/:id",
          "host": ["{{meng}}"],
          "path": ["api", "v1", "users", ":id"],
          "variable": [
            {
              "key": "id",
              "value": "60d21b4667d0d8992e610c85",
              "description": "The MongoDB ID of the user"
            }
          ]
        },
        "description": "Retrieves a specific user by their ID."
      },
      "response": [
        {
          "name": "Success Response",
          "originalRequest": {
            "method": "GET",
            "url": {
              "raw": "{{meng}}/api/v1/users/:id",
              "host": ["{{meng}}"],
              "path": ["api", "v1", "users", ":id"],
              "variable": [
                {
                  "key": "id",
                  "value": "60d21b4667d0d8992e610c85"
                }
              ]
            }
          },
          "status": "OK",
          "code": 200,
          "_postman_previewlanguage": "json",
          "header": [
            {
              "key": "Content-Type",
              "value": "application/json"
            }
          ],
          "body": {
            "mode": "raw",
            "raw": "{\n  \"data\": {\n    \"_id\": \"60d21b4667d0d8992e610c85\",\n    \"name\": \"John Doe\",\n    \"email\": \"john@example.com\",\n    \"role\": \"user\",\n    \"phone\": \"01234567890\",\n    \"image\": \"https://res.cloudinary.com/your-cloud-name/image/upload/v1/users/profiles/user1.png\",\n    \"active\": true,\n    \"createdAt\": \"2023-06-18T14:20:22.000Z\",\n    \"updatedAt\": \"2023-06-18T14:20:22.000Z\"\n  }\n}"
          }
        },
        {
          "name": "User Not Found",
          "originalRequest": {
            "method": "GET",
            "url": {
              "raw": "{{meng}}/api/v1/users/:id",
              "host": ["{{meng}}"],
              "path": ["api", "v1", "users", ":id"],
              "variable": [
                {
                  "key": "id",
                  "value": "60d21b4667d0d8992e610c99"
                }
              ]
            }
          },
          "status": "Not Found",
          "code": 404,
          "_postman_previewlanguage": "json",
          "header": [
            {
              "key": "Content-Type",
              "value": "application/json"
            }
          ],
          "body": {
            "mode": "raw",
            "raw": "{\n  \"status\": \"error\",\n  \"message\": \"No user found with this id: 60d21b4667d0d8992e610c99\",\n  \"statusCode\": 404\n}"
          }
        }
      ]
    },
    {
      "name": "Create User",
      "request": {
        "method": "POST",
        "url": {
          "raw": "{{meng}}/api/v1/users",
          "host": ["{{meng}}"],
          "path": ["api", "v1", "users"]
        },
        "body": {
          "mode": "formdata",
          "formdata": [
            {
              "key": "name",
              "value": "Ahmed Mohamed",
              "type": "text",
              "description": "User's full name (3-32 characters, letters and spaces only)"
            },
            {
              "key": "email",
              "value": "ahmed@example.com",
              "type": "text",
              "description": "User's email address (must be unique)"
            },
            {
              "key": "password",
              "value": "Password123!",
              "type": "text",
              "description": "Password (min 8 chars, must include uppercase, lowercase, number, and special character)"
            },
            {
              "key": "passwordConfirm",
              "value": "Password123!",
              "type": "text",
              "description": "Password confirmation (must match password)"
            },
            {
              "key": "phone",
              "value": "01234567892",
              "type": "text",
              "description": "Egyptian phone number (optional)"
            },
            {
              "key": "role",
              "value": "user",
              "type": "text",
              "description": "User role (user or admin, defaults to user)"
            },
            {
              "key": "image",
              "type": "file",
              "description": "User profile image (optional)"
            }
          ]
        },
        "description": "Creates a new user with the provided information."
      },
      "response": [
        {
          "name": "Success Response",
          "originalRequest": {
            "method": "POST",
            "url": {
              "raw": "{{meng}}/api/v1/users",
              "host": ["{{meng}}"],
              "path": ["api", "v1", "users"]
            },
            "body": {
              "mode": "formdata",
              "formdata": [
                {
                  "key": "name",
                  "value": "Ahmed Mohamed",
                  "type": "text"
                },
                {
                  "key": "email",
                  "value": "ahmed@example.com",
                  "type": "text"
                },
                {
                  "key": "password",
                  "value": "Password123!",
                  "type": "text"
                },
                {
                  "key": "passwordConfirm",
                  "value": "Password123!",
                  "type": "text"
                },
                {
                  "key": "phone",
                  "value": "01234567892",
                  "type": "text"
                },
                {
                  "key": "role",
                  "value": "user",
                  "type": "text"
                }
              ]
            }
          },
          "status": "Created",
          "code": 201,
          "_postman_previewlanguage": "json",
          "header": [
            {
              "key": "Content-Type",
              "value": "application/json"
            }
          ],
          "body": {
            "mode": "raw",
            "raw": "{\n  \"data\": {\n    \"_id\": \"60d21b4667d0d8992e610c87\",\n    \"name\": \"Ahmed Mohamed\",\n    \"slug\": \"ahmed-mohamed\",\n    \"email\": \"ahmed@example.com\",\n    \"role\": \"user\",\n    \"phone\": \"01234567892\",\n    \"image\": \"https://res.cloudinary.com/your-cloud-name/image/upload/v1/users/profiles/user3.png\",\n    \"active\": true,\n    \"createdAt\": \"2023-06-18T15:30:10.000Z\",\n    \"updatedAt\": \"2023-06-18T15:30:10.000Z\"\n  }\n}"
          }
        },
        {
          "name": "Validation Error",
          "originalRequest": {
            "method": "POST",
            "url": {
              "raw": "{{meng}}/api/v1/users",
              "host": ["{{meng}}"],
              "path": ["api", "v1", "users"]
            },
            "body": {
              "mode": "formdata",
              "formdata": [
                {
                  "key": "name",
                  "value": "A",
                  "type": "text"
                },
                {
                  "key": "email",
                  "value": "invalid-email",
                  "type": "text"
                },
                {
                  "key": "password",
                  "value": "weak",
                  "type": "text"
                },
                {
                  "key": "passwordConfirm",
                  "value": "doesnotmatch",
                  "type": "text"
                }
              ]
            }
          },
          "status": "Bad Request",
          "code": 400,
          "_postman_previewlanguage": "json",
          "header": [
            {
              "key": "Content-Type",
              "value": "application/json"
            }
          ],
          "body": {
            "mode": "raw",
            "raw": "{\n  \"status\": \"error\",\n  \"message\": [\n    {\n      \"msg\": \"Name must be at least 3 characters long\",\n      \"param\": \"name\",\n      \"location\": \"body\"\n    },\n    {\n      \"msg\": \"Invalid email address format\",\n      \"param\": \"email\",\n      \"location\": \"body\"\n    },\n    {\n      \"msg\": \"Password must be at least 8 characters long\",\n      \"param\": \"password\",\n      \"location\": \"body\"\n    },\n    {\n      \"msg\": \"Password confirmation does not match password\",\n      \"param\": \"passwordConfirm\",\n      \"location\": \"body\"\n    }\n  ],\n  \"statusCode\": 400\n}"
          }
        }
      ]
    },
    {
      "name": "Update User",
      "request": {
        "method": "PUT",
        "url": {
          "raw": "{{meng}}/api/v1/users/:id",
          "host": ["{{meng}}"],
          "path": ["api", "v1", "users", ":id"],
          "variable": [
            {
              "key": "id",
              "value": "60d21b4667d0d8992e610c85",
              "description": "The MongoDB ID of the user to update"
            }
          ]
        },
        "body": {
          "mode": "formdata",
          "formdata": [
            {
              "key": "name",
              "value": "John Smith",
              "type": "text",
              "description": "User's full name (3-32 characters, letters and spaces only)"
            },
            {
              "key": "email",
              "value": "johnsmith@example.com",
              "type": "text",
              "description": "User's email address (must be unique)"
            },
            {
              "key": "phone",
              "value": "01234567893",
              "type": "text",
              "description": "Egyptian phone number (optional)"
            },
            {
              "key": "role",
              "value": "admin",
              "type": "text",
              "description": "User role (user or admin)"
            },
            {
              "key": "image",
              "type": "file",
              "description": "User profile image (optional)"
            }
          ]
        },
        "description": "Updates a user's information. Note: This endpoint cannot be used to update passwords."
      },
      "response": [
        {
          "name": "Success Response",
          "originalRequest": {
            "method": "PUT",
            "url": {
              "raw": "{{meng}}/api/v1/users/:id",
              "host": ["{{meng}}"],
              "path": ["api", "v1", "users", ":id"],
              "variable": [
                {
                  "key": "id",
                  "value": "60d21b4667d0d8992e610c85"
                }
              ]
            },
            "body": {
              "mode": "formdata",
              "formdata": [
                {
                  "key": "name",
                  "value": "John Smith",
                  "type": "text"
                },
                {
                  "key": "email",
                  "value": "johnsmith@example.com",
                  "type": "text"
                },
                {
                  "key": "role",
                  "value": "admin",
                  "type": "text"
                }
              ]
            }
          },
          "status": "OK",
          "code": 200,
          "_postman_previewlanguage": "json",
          "header": [
            {
              "key": "Content-Type",
              "value": "application/json"
            }
          ],
          "body": {
            "mode": "raw",
            "raw": "{\n  \"status\": \"success\",\n  \"data\": {\n    \"_id\": \"60d21b4667d0d8992e610c85\",\n    \"name\": \"John Smith\",\n    \"slug\": \"john-smith\",\n    \"email\": \"johnsmith@example.com\",\n    \"role\": \"admin\",\n    \"phone\": \"01234567890\",\n    \"image\": \"https://res.cloudinary.com/your-cloud-name/image/upload/v1/users/profiles/user1.png\",\n    \"active\": true,\n    \"createdAt\": \"2023-06-18T14:20:22.000Z\",\n    \"updatedAt\": \"2023-06-18T16:45:30.000Z\"\n  }\n}"
          }
        },
        {
          "name": "Password Update Attempt",
          "originalRequest": {
            "method": "PUT",
            "url": {
              "raw": "{{meng}}/api/v1/users/:id",
              "host": ["{{meng}}"],
              "path": ["api", "v1", "users", ":id"],
              "variable": [
                {
                  "key": "id",
                  "value": "60d21b4667d0d8992e610c85"
                }
              ]
            },
            "body": {
              "mode": "formdata",
              "formdata": [
                {
                  "key": "name",
                  "value": "John Smith",
                  "type": "text"
                },
                {
                  "key": "password",
                  "value": "NewPassword123!",
                  "type": "text"
                }
              ]
            }
          },
          "status": "Bad Request",
          "code": 400,
          "_postman_previewlanguage": "json",
          "header": [
            {
              "key": "Content-Type",
              "value": "application/json"
            }
          ],
          "body": {
            "mode": "raw",
            "raw": "{\n  \"status\": \"error\",\n  \"message\": \"This route is not for password updates. Please use /changePassword/:id\",\n  \"statusCode\": 400\n}"
          }
        }
      ]
    },
    {
      "name": "Toggle User Active Status",
      "request": {
        "method": "PATCH",
        "url": {
          "raw": "{{meng}}/api/v1/users/toggleActive/:id",
          "host": ["{{meng}}"],
          "path": ["api", "v1", "users", "toggleActive", ":id"],
          "variable": [
            {
              "key": "id",
              "value": "60d21b4667d0d8992e610c85",
              "description": "The MongoDB ID of the user"
            }
          ]
        },
        "description": "Toggles a user's active status. If the user is active, they will be deactivated. If they are inactive, they will be reactivated."
      },
      "response": [
        {
          "name": "Deactivation Response",
          "originalRequest": {
            "method": "PATCH",
            "url": {
              "raw": "{{meng}}/api/v1/users/toggleActive/:id",
              "host": ["{{meng}}"],
              "path": ["api", "v1", "users", "toggleActive", ":id"],
              "variable": [
                {
                  "key": "id",
                  "value": "60d21b4667d0d8992e610c85"
                }
              ]
            }
          },
          "status": "OK",
          "code": 200,
          "_postman_previewlanguage": "json",
          "header": [
            {
              "key": "Content-Type",
              "value": "application/json"
            }
          ],
          "body": {
            "mode": "raw",
            "raw": "{\n  \"status\": \"success\",\n  \"message\": \"User deactivated successfully\",\n  \"data\": {\n    \"id\": \"60d21b4667d0d8992e610c85\",\n    \"name\": \"John Smith\",\n    \"email\": \"johnsmith@example.com\",\n    \"active\": false\n  }\n}"
          }
        },
        {
          "name": "Reactivation Response",
          "originalRequest": {
            "method": "PATCH",
            "url": {
              "raw": "{{meng}}/api/v1/users/toggleActive/:id",
              "host": ["{{meng}}"],
              "path": ["api", "v1", "users", "toggleActive", ":id"],
              "variable": [
                {
                  "key": "id",
                  "value": "60d21b4667d0d8992e610c85"
                }
              ]
            }
          },
          "status": "OK",
          "code": 200,
          "_postman_previewlanguage": "json",
          "header": [
            {
              "key": "Content-Type",
              "value": "application/json"
            }
          ],
          "body": {
            "mode": "raw",
            "raw": "{\n  \"status\": \"success\",\n  \"message\": \"User activated successfully\",\n  \"data\": {\n    \"id\": \"60d21b4667d0d8992e610c85\",\n    \"name\": \"John Smith\",\n    \"email\": \"johnsmith@example.com\",\n    \"active\": true\n  }\n}"
          }
        }
      ]
    },
    {
      "name": "Change User Password",
      "request": {
        "method": "PUT",
        "url": {
          "raw": "{{meng}}/api/v1/users/changePassword/:id",
          "host": ["{{meng}}"],
          "path": ["api", "v1", "users", "changePassword", ":id"],
          "variable": [
            {
              "key": "id",
              "value": "60d21b4667d0d8992e610c85",
              "description": "The MongoDB ID of the user"
            }
          ]
        },
        "body": {
          "mode": "raw",
          "raw": "{\n  \"currentPassword\": \"Password123!\",\n  \"password\": \"NewPassword456@\",\n  \"passwordConfirm\": \"NewPassword456@\"\n}",
          "options": {
            "raw": {
              "language": "json"
            }
          }
        },
        "description": "Changes a user's password. Requires the current password for verification."
      },
      "response": [
        {
          "name": "Success Response",
          "originalRequest": {
            "method": "PUT",
            "url": {
              "raw": "{{meng}}/api/v1/users/changePassword/:id",
              "host": ["{{meng}}"],
              "path": ["api", "v1", "users", "changePassword", ":id"],
              "variable": [
                {
                  "key": "id",
                  "value": "60d21b4667d0d8992e610c85"
                }
              ]
            },
            "body": {
              "mode": "raw",
              "raw": "{\n  \"currentPassword\": \"Password123!\",\n  \"password\": \"NewPassword456@\",\n  \"passwordConfirm\": \"NewPassword456@\"\n}",
              "options": {
                "raw": {
                  "language": "json"
                }
              }
            }
          },
          "status": "OK",
          "code": 200,
          "_postman_previewlanguage": "json",
          "header": [
            {
              "key": "Content-Type",
              "value": "application/json"
            }
          ],
          "body": {
            "mode": "raw",
            "raw": "{\n  \"status\": \"success\",\n  \"message\": \"Password updated successfully\",\n  \"data\": {\n    \"id\": \"60d21b4667d0d8992e610c85\",\n    \"name\": \"John Smith\",\n    \"email\": \"johnsmith@example.com\"\n  }\n}"
          }
        },
        {
          "name": "Incorrect Current Password",
          "originalRequest": {
            "method": "PUT",
            "url": {
              "raw": "{{meng}}/api/v1/users/changePassword/:id",
              "host": ["{{meng}}"],
              "path": ["api", "v1", "users", "changePassword", ":id"],
              "variable": [
                {
                  "key": "id",
                  "value": "60d21b4667d0d8992e610c85"
                }
              ]
            },
            "body": {
              "mode": "raw",
              "raw": "{\n  \"currentPassword\": \"WrongPassword123!\",\n  \"password\": \"NewPassword456@\",\n  \"passwordConfirm\": \"NewPassword456@\"\n}",
              "options": {
                "raw": {
                  "language": "json"
                }
              }
            }
          },
          "status": "Unauthorized",
          "code": 401,
          "_postman_previewlanguage": "json",
          "header": [
            {
              "key": "Content-Type",
              "value": "application/json"
            }
          ],
          "body": {
            "mode": "raw",
            "raw": "{\n  \"status\": \"error\",\n  \"message\": \"Current password is incorrect\",\n  \"statusCode\": 401\n}"
          }
        },
        {
          "name": "Password Validation Error",
          "originalRequest": {
            "method": "PUT",
            "url": {
              "raw": "{{meng}}/api/v1/users/changePassword/:id",
              "host": ["{{meng}}"],
              "path": ["api", "v1", "users", "changePassword", ":id"],
              "variable": [
                {
                  "key": "id",
                  "value": "60d21b4667d0d8992e610c85"
                }
              ]
            },
            "body": {
              "mode": "raw",
              "raw": "{\n  \"currentPassword\": \"Password123!\",\n  \"password\": \"weak\",\n  \"passwordConfirm\": \"doesnotmatch\"\n}",
              "options": {
                "raw": {
                  "language": "json"
                }
              }
            }
          },
          "status": "Bad Request",
          "code": 400,
          "_postman_previewlanguage": "json",
          "header": [
            {
              "key": "Content-Type",
              "value": "application/json"
            }
          ],
          "body": {
            "mode": "raw",
            "raw": "{\n  \"status\": \"error\",\n  \"message\": [\n    {\n      \"msg\": \"Password must be at least 8 characters long\",\n      \"param\": \"password\",\n      \"location\": \"body\"\n    },\n    {\n      \"msg\": \"Password confirmation does not match password\",\n      \"param\": \"passwordConfirm\",\n      \"location\": \"body\"\n    }\n  ],\n  \"statusCode\": 400\n}"
          }
        }
      ]
    }
  ],
  "variable": [
    {
      "key": "meng",
      "value": "http://localhost:3000",
      "type": "string"
    }
  ]
}